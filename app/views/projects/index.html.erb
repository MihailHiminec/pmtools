<main id="content" role="main" class="calc-100vh-footer">
  <div class="calc-100vh-footer">
    <div class="shadow-sm pl-5 pr-3 mb-2 pt-2 pb-2 bg-white">
      <div class="font-weight-medium font-size-14 d-flex justify-content-between align-items-center">
        <div>
          Проекты
        </div>
        <div class="d-flex align-items-center">
          <%= link_to new_project_path, class: "u-list__link u-unfold-wrapper pr-3" do %>
            Новый
            <span class="pl-2 fa fa-plus-circle text-secondary small opacity-0_2"></span>
          <% end %>
        </div>
      </div>
    </div>
    <div class="container-fluid u-space-1-bottom u-space-bottom-0--lg">
      <!-- Nav -->
      <div class="row mt-4 mr-1 ml-1 mb-4">
        <div class="col-md-12 order-md-1">
          <%= form_for @search, as: :f, method: :get, url: projects_path, :html => {:class => 'input-group-sm u-form u-form--sm u-form--modern'} do |e| %>
            <%= e.search_field :title, class: 'form-control u-form__input', placeholder: 'Поиск' %>
            <%= link_to 'Дата создания', projects_path(f: @search.sort_params_for(:created_at)), class: @search.sort?(:created_at) && 'u-label u-label--xs u-label--primary active' %>
            <%= e.select :user_id, User.all.map { |u| [u.name, u.id] }, { :include_blank => 'Все проекты' }, {class: 'js-select u-select', 'data-width' => 'fit', 'data-style' => 'bg-transparent text-secondary font-size-14 font-weight-normal pl-0', onchange: 'this.form.submit()'} %>
          <% end %>
        </div>
      </div>
      <!-- End Nav -->

      <% if @search.results? %>
        <ul class="list-group shadow-sm">
            <%= render 'projects/project' %>
        </ul>
        <% else %>
        <div class="alert alert-primary alert-dismissible fade show pt-8 mt-8 mb-8 pb-8" role="alert">
          К сожалению проектов не найдено
        </div>
      <% end %>
    </div>
  </div>
</main>